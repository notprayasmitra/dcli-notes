*This wiki will be following the newer structure for dcli configuration.*

### Recommended Structure

```
arch-config/
├── config.yaml             # Pointer file (just contains: host: hostname)
├── hosts/
│   ├── laptop.yaml         # Full config for laptop
│   ├── desktop.yaml        # Full config for desktop
│   └── shared/             # Optional: shared configs
│       └── common.yaml
├── modules/
│   ├── base.yaml           # Base packages (auto-loaded)
│   ├── gaming/             # Module directory
│   │   ├── module.yaml
│   │   └── packages.yaml
│   └── dev.yaml            # Simple module file
├── scripts/                # Post-install hooks
├── system-packages.yaml    # Auto-generated by 'dcli merge' (git-ignored)
└── state/                  # Runtime state (git-ignored)
```

### Host Configuration File

Host files now contain your complete configuration:

```yaml
# hosts/laptop.yaml
host: laptop
description: Work Laptop
# Import shared configurations (optional)
import:
  - hosts/shared/common.yaml
# Enabled modules
enabled_modules:
  - gaming
  - dev-tools
# Host-specific packages
packages:
  - tlp
  - laptop-mode-tools
# Exclude packages from base or modules
exclude:
  - steam  # Don't want gaming on work laptop
# Settings
flatpak_scope: user
auto_prune: false
backup_tool: timeshift
```

### Config Import Feature

Share configurations across multiple machines:

```yaml
# hosts/laptop.yaml
import:
  - hosts/shared/laptop-common.yaml
# hosts/desktop.yaml
import:
  - hosts/shared/desktop-common.yaml
  - hosts/shared/gaming-common.yaml
```

This allows you to:

- Create shared configs for similar machines
- Avoid duplication across hosts
- Organize complex configurations
- Import multiple files recursively